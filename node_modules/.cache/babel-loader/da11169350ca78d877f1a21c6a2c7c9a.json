{"ast":null,"code":"import _slicedToArray from \"/Users/miguelJR/hackathon/Front-End/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/miguelJR/hackathon/Front-End/src/Wallet.js\";\n\nimport React, { useState } from 'react';\nimport { ethers } from 'ethers';\n\nvar WalletCard = function WalletCard() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      errorMessage = _useState2[0],\n      setErrorMessage = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      defaultAccount = _useState4[0],\n      setDefaultAccount = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      userBalance = _useState6[0],\n      setUserBalance = _useState6[1];\n\n  var _useState7 = useState('Connect Wallet'),\n      _useState8 = _slicedToArray(_useState7, 2),\n      connButtonText = _useState8[0],\n      setConnButtonText = _useState8[1];\n\n  var connectWalletHandler = function connectWalletHandler() {\n    if (window.ethereum && window.ethereum.isMetaMask) {\n      console.log('MetaMask Working!'); // console.log(accountChangedHandler(result[0]))\n\n      window.ethereum.request({\n        method: 'eth_requestAccounts'\n      }).then(function (result) {\n        console.log(accountChangedHandler(result[0]));\n        setConnButtonText('Wallet Connected');\n        getAccountBalance(result[1]);\n      }).catch(function (error) {\n        setErrorMessage(error.message);\n\n        if (Error.code === 4001) {\n          // EIP-1193 userRejectedRequest error\n          // If this happens, the user rejected the connection request.\n          console.log('Please connect to MetaMask.');\n        } else {\n          console.error(error);\n        }\n      });\n    } else {\n      console.log('Need to install MetaMask');\n      setErrorMessage('Please install MetaMask browser extension to interact');\n    }\n  }; // update account, will cause component re-render\n\n\n  var accountChangedHandler = function accountChangedHandler(newAccount) {\n    setDefaultAccount(newAccount);\n    getAccountBalance(newAccount.toString());\n  };\n\n  var getAccountBalance = function getAccountBalance(account) {\n    window.ethereum.request({\n      method: 'eth_getBalance',\n      params: [account, 'latest']\n    }).then(function (balance) {\n      setUserBalance(ethers.utils.formatEther(balance));\n    }).catch(function (error) {\n      setErrorMessage(error.message);\n    });\n  };\n\n  var chainChangedHandler = function chainChangedHandler() {\n    // reload the page to avoid any errors with chain change mid use of application\n    window.location.reload();\n  }; // listen for account changes\n\n\n  window.ethereum.on('accountsChanged', accountChangedHandler);\n  window.ethereum.on('chainChanged', chainChangedHandler);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 1\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-primary\",\n    onClick: connectWalletHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 4\n    }\n  }, connButtonText), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"accountDisplay\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 4\n    }\n  }));\n};\n\nexport default WalletCard;","map":{"version":3,"names":["React","useState","ethers","WalletCard","errorMessage","setErrorMessage","defaultAccount","setDefaultAccount","userBalance","setUserBalance","connButtonText","setConnButtonText","connectWalletHandler","window","ethereum","isMetaMask","console","log","request","method","then","result","accountChangedHandler","getAccountBalance","catch","error","message","Error","code","newAccount","toString","account","params","balance","utils","formatEther","chainChangedHandler","location","reload","on"],"sources":["/Users/miguelJR/hackathon/Front-End/src/Wallet.js"],"sourcesContent":["\nimport React, {useState} from 'react'\nimport {ethers} from 'ethers'\n\nconst WalletCard = () => {\n\n\tconst [errorMessage, setErrorMessage] = useState(null);\n\tconst [defaultAccount, setDefaultAccount] = useState(null);\n\tconst [userBalance, setUserBalance] = useState(null);\n\tconst [connButtonText, setConnButtonText] = useState('Connect Wallet');\n\n\tconst connectWalletHandler = () => {\n\t\tif (window.ethereum && window.ethereum.isMetaMask) {\n            console.log('MetaMask Working!');\n// console.log(accountChangedHandler(result[0]))\n\n\t\t\twindow.ethereum.request({ method: 'eth_requestAccounts'})\n\t\t\t.then(result => {\n                console.log(accountChangedHandler(result[0]));\n               \n\t\t\t\tsetConnButtonText('Wallet Connected');\n\t\t\t\tgetAccountBalance(result[1]);\n\t\t\t})\n\t\t\t.catch(error => {\n                setErrorMessage(error.message);\n               \n      if (Error.code === 4001) {\n        // EIP-1193 userRejectedRequest error\n        // If this happens, the user rejected the connection request.\n        console.log('Please connect to MetaMask.');\n     } else {\n        console.error(error);}\n\t\t\t\n\t\t\t});\n\n\t\t} else {\n\t\t\tconsole.log('Need to install MetaMask');\n\t\t\tsetErrorMessage('Please install MetaMask browser extension to interact');\n\t\t}\n\t}\n\n\t// update account, will cause component re-render\n\tconst accountChangedHandler = (newAccount) => {\n\t\tsetDefaultAccount(newAccount);\n\t\tgetAccountBalance(newAccount.toString());\n\t}\n\n\tconst getAccountBalance = (account) => {\n\t\twindow.ethereum.request({method: 'eth_getBalance', params: [account, 'latest']})\n\t\t.then(balance => {\n\t\t\tsetUserBalance(ethers.utils.formatEther(balance));\n\t\t})\n\t\t.catch(error => {\n\t\t\tsetErrorMessage(error.message);\n\t\t});\n\t};\n\n\tconst chainChangedHandler = () => {\n\t\t// reload the page to avoid any errors with chain change mid use of application\n\t\twindow.location.reload();\n\t}\n\n\n\t// listen for account changes\n\twindow.ethereum.on('accountsChanged', accountChangedHandler);\n\n\twindow.ethereum.on('chainChanged', chainChangedHandler);\n\t\n\treturn (\n<div>\n\n\n\t\t\t<button  type=\"button\" className=\"btn btn-primary\" onClick={connectWalletHandler}>{connButtonText}</button>\n\t\t\t<div className='accountDisplay'>\n\t\t\t\t{/* <p>Address: {defaultAccount}</p> */}\n\t\t\t</div>\n\t\t\n\t\t</div>\n\t);\n}\n\nexport default WalletCard;"],"mappings":"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"},"metadata":{},"sourceType":"module"}